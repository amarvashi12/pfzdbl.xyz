<Window x:Class="WpfApplication2.MainForm"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:winForms="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
        xmlns:dts="clr-namespace:WpfApplication2"
        xmlns:local="clr-namespace:WpfApplication2"
        xmlns:Extenders="clr-namespace:WpfApplication2"
        xmlns:gif="http://wpfanimatedgif.codeplex.com"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        
        Title="Apple" MinHeight="650" MinWidth="1100" Height="650" Width="1260" Background="Transparent" AllowsTransparency="True"  WindowStartupLocation="CenterScreen" ResizeMode="NoResize" WindowStyle="None" ContentRendered="Window_ContentRendered_1" >

    <!-- Auto screen fit Add this code to Height and Width-->
    <!--Height="{Binding SystemParameters.PrimaryScreenHeight}" Width="{Binding SystemParameters.PrimaryScreenWidth}"-->
    
    <Window.Resources>
        <SolidColorBrush x:Key="TopHeaderColor" Color="#444"/>
        <SolidColorBrush x:Key="TopHeaderTextColor" Color="#FFF9F9F9"/>
        <SolidColorBrush x:Key="FGColor" Color="#a84849"/>
        <SolidColorBrush x:Key="ChatViewHeaderColor" Color="#a84849"/>
        <SolidColorBrush x:Key="ChatViewHeaderTextColor" Color="#fff"/>
        <SolidColorBrush x:Key="ChatContactsLoadingPanelColor" Color="White"/>
        <BitmapImage     x:Key="ChatContactsLoadingImageGif" UriSource="Resources/anim-loading.gif" />
        <SolidColorBrush x:Key="ChatContactsBackroundColor" Color="White"/>
        <SolidColorBrush x:Key="ChatContactsUsernameColor" Color="#444"/>
        <SolidColorBrush x:Key="ChatContactsLastMsgColor" Color="#888"/>
        <SolidColorBrush x:Key="ChatContactsTimeMsgColor" Color="#BFBFBF"/>
        <SolidColorBrush x:Key="ChatContactsImageBorderColor" Color="#f2f2f2"/>
        <SolidColorBrush x:Key="ChatContactsSearchPanel" Color="White"/>
        <BitmapImage     x:Key="SearchIcon" UriSource="icons/Search Filled-25.png" />
        <SolidColorBrush x:Key="ComboBoxNormalBorderBrush" Color="#fff" />
        <SolidColorBrush x:Key="ComboBoxNormalBackgroundBrush" Color="#fff" />
        <SolidColorBrush x:Key="ComboBoxDisabledForegroundBrush" Color="#888" />
        <SolidColorBrush x:Key="ComboBoxDisabledBackgroundBrush" Color="#fff" />
        <SolidColorBrush x:Key="ComboBoxDisabledBorderBrush" Color="#888" />
        <BitmapImage     x:Key="AllIconComboBox" UriSource="Pictures\photo.jpg" />
        <BitmapImage     x:Key="OnlineIconComboBox" UriSource="Pictures\big-green-circle.png" />
        <BitmapImage     x:Key="OfflineIconComboBox" UriSource="Pictures\Trafficlight-red-icon.png" />
        <SolidColorBrush x:Key="ProfileBackroundColor" Color="White"/>
        <SolidColorBrush x:Key="ProfileAllTextColor" Color="#555"/>
        <SolidColorBrush x:Key="ProfileLatestTimePost" Color="#777"/>
        <SolidColorBrush x:Key="ProfileFullNameTextcolor" Color="White"/>
        <BitmapImage     x:Key="ImageLoadingIcon" UriSource="Resources/45.gif" />
        <BitmapImage     x:Key="FullNameIcon" UriSource="icons\Contacts-15.png" />
        <BitmapImage     x:Key="GenderIcon" UriSource="icons\Transgender-15.png" />
        <BitmapImage     x:Key="CalendarIcon" UriSource="icons\Calendar-17.png" />
        <BitmapImage     x:Key="EmailIcon" UriSource="icons\Email-15.png" />
        <BitmapImage     x:Key="PlaceIcon" UriSource="icons\Marker-15.png" />
        <BitmapImage     x:Key="LastIcon" UriSource="icons\Invisible-16.png" />
        <BitmapImage     x:Key="FriendIcon" UriSource="icons\User Group Man Man-15.png" />
        <BitmapImage     x:Key="LastPostIcon" UriSource="icons\Create New-15.png" />
 
        <BitmapImage     x:Key="ChatboxBacgroundImage" UriSource="WowonderBackroundiamge.jpg" />
        <SolidColorBrush x:Key="FGChatoutgoingColor" Color="White"/>
        <SolidColorBrush x:Key="FGChatCommingColor" Color="White"/>



        <!--{DynamicResource ImageLoadingIcon}-->

        <TextBlock x:Key="NoMessageBlock" Text="Please select a recipient to start the chat"/>

        <Storyboard x:Key="sbShowRightMenu" >
            <ThicknessAnimation Storyboard.TargetProperty="Margin" From="0,0,-330,0" To="0,0,0,0" DecelerationRatio=".3" Duration="00:00:0.1" />
        </Storyboard>
        <Storyboard x:Key="sbHideRightMenu">
            <ThicknessAnimation Storyboard.TargetProperty="Margin" From="0,0,0,0" To="0,0,-330,0" AccelerationRatio=".3" Duration="00:00:0.1" />
        </Storyboard>

        <!-- Region Listbox Scrol and combobox -->
        <Style x:Key="ListBoxItemStyless" TargetType="{x:Type ListBoxItem}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Padding" Value="2,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSelected" Value="true"/>
                                    <Condition Property="Selector.IsSelectionActive" Value="false"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.InactiveSelectionHighlightBrushKey}}"/>
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}}"/>
                            </MultiTrigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <SolidColorBrush x:Key="ListBorder" Color="White"/>
        <Style x:Key="ListBoxStyle1" TargetType="{x:Type ListBox}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>

            <Setter Property="BorderBrush" Value="{StaticResource ListBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
            <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBox}">
                        <Grid >
                            <Rectangle Fill="White" RadiusX="10" RadiusY="10" Opacity="0.195" />
                            <Image  Source="{DynamicResource ChatboxBacgroundImage}" Opacity="0.4" Stretch="UniformToFill"/>
                            <StackPanel Background="{DynamicResource FGColor}" Opacity="0.1">

                            </StackPanel>


                            <Border CornerRadius="10" x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="1" SnapsToDevicePixels="true">
                                <ScrollViewer Focusable="false" Padding="{TemplateBinding Padding}" Template="{DynamicResource ScrollViewerControlTemplate1}">
                                    <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </ScrollViewer>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            </Trigger>
                            <Trigger Property="IsGrouping" Value="true">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ListBoxStyle2" TargetType="{x:Type ListBox}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>

            <Setter Property="BorderBrush" Value="{StaticResource ListBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
            <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBox}">
                        <Grid>
                            <Rectangle Fill="White" RadiusX="10" RadiusY="10" Opacity="0.195" />
                            <Border CornerRadius="10" x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="1" SnapsToDevicePixels="true">
                                <ScrollViewer Focusable="false" Padding="{TemplateBinding Padding}" Template="{DynamicResource ScrollViewerControlTemplate1}">
                                    <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </ScrollViewer>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            </Trigger>
                            <Trigger Property="IsGrouping" Value="true">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ControlTemplate x:Key="ScrollViewerControlTemplate1" TargetType="{x:Type ScrollViewer}">
            <Grid x:Name="Grid" Background="{TemplateBinding Background}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" CanContentScroll="{TemplateBinding CanContentScroll}" CanHorizontallyScroll="False" CanVerticallyScroll="False" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Grid.Column="0" Margin="{TemplateBinding Padding}" />
                <ScrollBar x:Name="PART_VerticalScrollBar" AutomationProperties.AutomationId="VerticalScrollBar" Cursor="Arrow" Grid.Column="1" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportHeight}" Style="{DynamicResource ScrollBarStyle1}"/>
            </Grid>
        </ControlTemplate>
        <LinearGradientBrush x:Key="VerticalScrollBarBackground" EndPoint="3,0" StartPoint="6,0">
            <GradientStop Color="#a84849" Offset="0"/>
            <GradientStop Color="#a84849" Offset="0.20"/>
            <GradientStop Color="#a84849" Offset="0.80"/>
            <GradientStop Color="#a84849" Offset="1"/>
        </LinearGradientBrush>
        <SolidColorBrush x:Key="ScrollBarDisabledBackground" Color="#a84849"/>
        <Style x:Key="ScrollBarButton" TargetType="{x:Type RepeatButton}">
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="Focusable" Value="false"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type RepeatButton}">
                        <Microsoft_Windows_Themes:ScrollChrome x:Name="Chrome" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" SnapsToDevicePixels="true" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="{TemplateBinding Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="VerticalScrollBarPageButton" TargetType="{x:Type RepeatButton}">
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Focusable" Value="false"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type RepeatButton}">
                        <Rectangle Fill="{TemplateBinding Background}" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ScrollBarThumb" TargetType="{x:Type Thumb}">
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Rectangle Width="3" Fill="{DynamicResource FGColor}" RadiusX="2" RadiusY="1">
                            <!--<Rectangle.Effect>
                                <DropShadowEffect ShadowDepth="0" BlurRadius="10" Color="White" />
                            </Rectangle.Effect>-->
                        </Rectangle>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <LinearGradientBrush x:Key="HorizontalScrollBarBackground" EndPoint="0,1" StartPoint="0,0">
            <GradientStop Color="#E1E1E1" Offset="0"/>
            <GradientStop Color="#EDEDED" Offset="0.20"/>
            <GradientStop Color="#EDEDED" Offset="0.80"/>
            <GradientStop Color="#E3E3E3" Offset="1"/>
        </LinearGradientBrush>
        <Style x:Key="HorizontalScrollBarPageButton" TargetType="{x:Type RepeatButton}">
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Focusable" Value="false"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type RepeatButton}">
                        <Rectangle Fill="{TemplateBinding Background}" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ScrollBarStyle1" TargetType="{x:Type ScrollBar}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Stylus.IsPressAndHoldEnabled" Value="false"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="false"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="Width" Value="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"/>
            <Setter Property="MinWidth" Value="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollBar}">
                        <Grid x:Name="Bg" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                            <Border Width="1" Background="#FFFFFF" HorizontalAlignment="Center"/>
                            <Track x:Name="PART_Track" IsDirectionReversed="true" IsEnabled="{TemplateBinding IsMouseOver}">

                                <Track.Thumb>
                                    <Thumb Style="{StaticResource ScrollBarThumb}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="VerticalGripper"/>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Background" TargetName="Bg" Value="{StaticResource ScrollBarDisabledBackground}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="Width" Value="Auto"/>
                    <Setter Property="MinWidth" Value="0"/>
                    <Setter Property="Height" Value="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarHeightKey}}"/>
                    <Setter Property="MinHeight" Value="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarHeightKey}}"/>
                    <Setter Property="Background" Value="{StaticResource HorizontalScrollBarBackground}"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ScrollBar}">
                                <Grid x:Name="Bg" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition MaxWidth="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}}"/>
                                        <ColumnDefinition Width="0.00001*"/>
                                        <ColumnDefinition MaxWidth="{DynamicResource {x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}}"/>
                                    </Grid.ColumnDefinitions>
                                    <RepeatButton Command="{x:Static ScrollBar.LineLeftCommand}" IsEnabled="{TemplateBinding IsMouseOver}" Style="{StaticResource ScrollBarButton}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="LeftArrow"/>
                                    <Track x:Name="PART_Track" Grid.Column="1" IsEnabled="{TemplateBinding IsMouseOver}">
                                        <Track.DecreaseRepeatButton>
                                            <RepeatButton Command="{x:Static ScrollBar.PageLeftCommand}" Style="{StaticResource HorizontalScrollBarPageButton}"/>
                                        </Track.DecreaseRepeatButton>
                                        <Track.IncreaseRepeatButton>
                                            <RepeatButton Command="{x:Static ScrollBar.PageRightCommand}" Style="{StaticResource HorizontalScrollBarPageButton}"/>
                                        </Track.IncreaseRepeatButton>
                                        <Track.Thumb>
                                            <Thumb Style="{StaticResource ScrollBarThumb}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="HorizontalGripper"/>
                                        </Track.Thumb>
                                    </Track>
                                    <RepeatButton Grid.Column="2" Command="{x:Static ScrollBar.LineRightCommand}" IsEnabled="{TemplateBinding IsMouseOver}" Style="{StaticResource ScrollBarButton}" Microsoft_Windows_Themes:ScrollChrome.ScrollGlyph="RightArrow"/>
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="false">
                                        <Setter Property="Background" TargetName="Bg" Value="{StaticResource ScrollBarDisabledBackground}"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <ControlTemplate TargetType="ToggleButton" x:Key="ComboBoxToggleButtonTemplate">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="20" />
                </Grid.ColumnDefinitions>
                <Border Grid.ColumnSpan="2" Name="Border"
              BorderBrush="{StaticResource ComboBoxNormalBorderBrush}" 
              CornerRadius="0" BorderThickness="1, 1, 1, 1" 
              Background="{StaticResource ComboBoxNormalBackgroundBrush}" />
                <Border Grid.Column="1" Margin="1, 1, 1, 1" BorderBrush="#444" Name="ButtonBorder"
              CornerRadius="0, 0, 0, 0" BorderThickness="0, 0, 0, 0" 
              Background="{StaticResource ComboBoxNormalBackgroundBrush}" />

                <Path Name="Arrow" Grid.Column="1" 
            Data="M0,0 L0,2 L4,6 L8,2 L8,0 L4,4 z"
            HorizontalAlignment="Center" Fill="#444"
            VerticalAlignment="Center" />
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="UIElement.IsMouseOver" Value="True">
                    <Setter Property="Panel.Background" TargetName="ButtonBorder" Value="WhiteSmoke"/>
                </Trigger>
                <Trigger Property="ToggleButton.IsChecked" Value="True">
                    <Setter Property="Panel.Background" TargetName="ButtonBorder" Value="WhiteSmoke"/>
                    <Setter Property="Shape.Fill" TargetName="Arrow" Value="#FF8D979E"/>
                </Trigger>
                <Trigger Property="UIElement.IsEnabled" Value="False">
                    <Setter Property="Panel.Background" TargetName="Border" Value="{StaticResource ComboBoxDisabledBackgroundBrush}"/>
                    <Setter Property="Panel.Background" TargetName="ButtonBorder" Value="{StaticResource ComboBoxDisabledBackgroundBrush}"/>
                    <Setter Property="Border.BorderBrush" TargetName="ButtonBorder" Value="{StaticResource ComboBoxDisabledBorderBrush}"/>
                    <Setter Property="TextElement.Foreground" Value="{StaticResource ComboBoxDisabledForegroundBrush}"/>
                    <Setter Property="Shape.Fill" TargetName="Arrow" Value="#999"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <Style x:Key="ComboBoxFlatStyle"  TargetType="{x:Type ComboBox}">
            <Setter Property="UIElement.SnapsToDevicePixels" Value="True"/>
            <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="True"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
            <Setter Property="TextElement.Foreground" Value="Black"/>
            <Setter Property="FrameworkElement.FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton Name="ToggleButton" Grid.Column="2"
                ClickMode="Press" Focusable="False"
                IsChecked="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                Template="{StaticResource ComboBoxToggleButtonTemplate}"/>

                            <ContentPresenter Name="ContentSite" Margin="5, 3, 23, 3" IsHitTestVisible="False"
                              HorizontalAlignment="Left" VerticalAlignment="Center"                              
                              Content="{TemplateBinding ComboBox.SelectionBoxItem}" 
                              ContentTemplate="{TemplateBinding ComboBox.SelectionBoxItemTemplate}"
                              ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"/>
                            <TextBox Name="PART_EditableTextBox" Margin="3, 3, 23, 3"                     
                     IsReadOnly="{TemplateBinding IsReadOnly}"
                     Visibility="Hidden" Background="Transparent"
                     HorizontalAlignment="Left" VerticalAlignment="Center"
                     Focusable="True" >
                                <TextBox.Template>
                                    <ControlTemplate TargetType="TextBox" >
                                        <Border Name="PART_ContentHost" Focusable="False" />
                                    </ControlTemplate>
                                </TextBox.Template>
                            </TextBox>
                            <!--Popup showing items-->
                            <Popup Name="Popup" Placement="Bottom"
                   Focusable="False" AllowsTransparency="True"
                   IsOpen="{TemplateBinding ComboBox.IsDropDownOpen}"
                   PopupAnimation="Slide">
                                <Grid Name="DropDown" SnapsToDevicePixels="True"
                    MinWidth="{TemplateBinding FrameworkElement.ActualWidth}"
                    MaxHeight="{TemplateBinding ComboBox.MaxDropDownHeight}">
                                    <Border Name="DropDownBorder" Background="{DynamicResource ChatContactsSearchPanel}" Margin="0, 1, 0, 0"
                        CornerRadius="0" BorderThickness="1,1,1,1" 
                        BorderBrush="{StaticResource ComboBoxNormalBorderBrush}"/>
                                    <ScrollViewer Margin="4" SnapsToDevicePixels="True">
                                        <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained" />
                                    </ScrollViewer>
                                </Grid>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="ItemsControl.HasItems" Value="False">
                                <Setter Property="FrameworkElement.MinHeight" TargetName="DropDownBorder" Value="95"/>
                            </Trigger>

                            <Trigger Property="UIElement.IsEnabled" Value="False">
                                <Setter Property="TextElement.Foreground" Value="{StaticResource ComboBoxDisabledForegroundBrush}"/>
                            </Trigger>
                            <Trigger Property="ItemsControl.IsGrouping" Value="True">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="False"/>
                            </Trigger>
                            <Trigger Property="ComboBox.IsEditable" Value="True">
                                <Setter Property="KeyboardNavigation.IsTabStop" Value="False"/>
                                <Setter Property="UIElement.Visibility" TargetName="PART_EditableTextBox" Value="Visible"/>
                                <Setter Property="UIElement.Visibility" TargetName="ContentSite" Value="Hidden"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- End Region -->

        <!-- Region ListBox DataTamplates for Items -->
        <DataTemplate x:Key="commingmsg">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Left" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />

                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <!--<Border VerticalAlignment="Top"  Margin="0" DockPanel.Dock="Left" BorderBrush="#e0dede" CornerRadius="2" BorderThickness="1" HorizontalAlignment="Left" Height="37" RenderTransformOrigin="0.42,0.524"  Width="37">
                        <Grid>
                            <Border Name="mask" Background="#FF575757" CornerRadius="0"/>
                            <StackPanel>
                                <StackPanel.OpacityMask>
                                    <VisualBrush Visual="{Binding ElementName=mask}"/>
                                </StackPanel.OpacityMask>
                                <Image Source="{Binding UserImage}"  HorizontalAlignment="Left"  />
                                <Rectangle Height="50" Fill="#FFA84849"/>
                            </StackPanel>
                        </Grid>
                    </Border>-->
                    <Border DockPanel.Dock="Left" MaxWidth="350" Padding="5" Background="{DynamicResource FGChatCommingColor}" Margin="5,0,0,0" BorderBrush="#C2C2C2" CornerRadius="3" BorderThickness="0,0,0,1" HorizontalAlignment="Left" Height="auto" RenderTransformOrigin="0.42,0.524"  >
                        <Grid>
                            <StackPanel>
                                <RichTextBox DockPanel.Dock="Left" Width="{Binding WidthWrap}" BorderThickness="0" FontSize="13.6" Margin="0" VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#555" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                </RichTextBox>
                                <!--Grid.Row="1"-->
                                <TextBlock x:Name="Timechat" Margin="0" FontSize="11" FontFamily="Segoe UI" Foreground="#B3B3B3" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="goingmsg">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Right" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <Border DockPanel.Dock="Right" Padding="5" Background="{DynamicResource FGChatoutgoingColor}" Margin="5,0,0,0" BorderBrush="#C2C2C2" CornerRadius="3" BorderThickness="0,0,0,1" HorizontalAlignment="Left" Height="auto" RenderTransformOrigin="0.42,0.524"  >
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto"/>
                                <RowDefinition Height="auto"/>
                            </Grid.RowDefinitions>
                            <StackPanel>
                                <RichTextBox DockPanel.Dock="Right" Background="{DynamicResource FGChatoutgoingColor}" Width="{Binding WidthWrap}" BorderThickness="0" FontSize="13.6" Margin="0,5,0,0" VerticalAlignment="Top"  HorizontalAlignment="Right" FontFamily="Segoe UI" Foreground="#555" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                </RichTextBox>
                                <TextBlock x:Name="Timechat" Margin="0,5,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#B3B3B3" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="commingIMAGE">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Left" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <Border DockPanel.Dock="Top" Padding="5" Background="{DynamicResource FGChatCommingColor}" Margin="5,0,0,0" BorderBrush="#C2C2C2" CornerRadius="3" BorderThickness="0,0,0,1" HorizontalAlignment="Left" Height="auto" MaxWidth="300" RenderTransformOrigin="0.42,0.524"  >
                        <StackPanel>
                            <Button Cursor="Hand" PreviewMouseDown="PlaceholdersListBox_OnPreviewMouseDown" Click="ButtonBase_OnClick" BorderBrush="Transparent" BorderThickness="0" VerticalAlignment="Top">
                                <StackPanel VerticalAlignment="Top" HorizontalAlignment="Center">
                                    <Image Source="{Binding ImageMedia}"  MaxHeight="300"  MaxWidth="300" HorizontalAlignment="Left"  />
                                </StackPanel>
                            </Button>
                            <StackPanel VerticalAlignment="Bottom">
                                <RichTextBox DockPanel.Dock="Left" Width="{Binding WidthWrap}" Visibility="{Binding Visibilty}" BorderThickness="0" FontSize="13.6" Margin="0,5,0,0" VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#555" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                </RichTextBox>
                                <TextBlock x:Name="Timechat" Margin="0" FontSize="11" FontFamily="Segoe UI" Foreground="#B3B3B3" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                            </StackPanel>
                        </StackPanel>

                    </Border>
                </DockPanel>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="goingIMAGE">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Right" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True" >
                    <Border  DockPanel.Dock="Top" Padding="5" Background="{DynamicResource FGChatoutgoingColor}" Margin="5,0,0,0" BorderBrush="#C2C2C2" CornerRadius="3" BorderThickness="0,0,0,1" HorizontalAlignment="Left" Height="auto" MaxWidth="300" RenderTransformOrigin="0.42,0.524"  >
                        <StackPanel MaxWidth="300" >
                            <Button Cursor="Hand" PreviewMouseDown="PlaceholdersListBox_OnPreviewMouseDown" Click="ButtonBase_OnClick" BorderBrush="Transparent" BorderThickness="0" VerticalAlignment="Top">
                                <StackPanel VerticalAlignment="Top" HorizontalAlignment="Center">
                                    <Image Source="{Binding ImageMedia}"  MaxWidth="300" HorizontalAlignment="Left"  />
                                </StackPanel>

                            </Button>
                            <RichTextBox HorizontalAlignment="Left" Visibility="{Binding Visibilty}" Background="{DynamicResource FGChatoutgoingColor}"  Width="{Binding WidthWrap}" BorderThickness="0" FontSize="13.6" Margin="0,5,0,0" VerticalAlignment="Top"  FontFamily="Segoe UI" Foreground="#555" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                            </RichTextBox>
                            <TextBlock x:Name="Timechat" Margin="-1,1,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#B3B3B3" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                        </StackPanel>
                    </Border>
                </DockPanel>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="commingFILE">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Left" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <!--<Border VerticalAlignment="Top"  Margin="0" DockPanel.Dock="Left" BorderBrush="#e0dede" CornerRadius="2" BorderThickness="1" HorizontalAlignment="Left" Height="37" RenderTransformOrigin="0.42,0.524"  Width="37">
                        <Grid>
                            <Border Name="mask" Background="#FF575757" CornerRadius="0"/>
                            <StackPanel>
                                <StackPanel.OpacityMask>
                                    <VisualBrush Visual="{Binding ElementName=mask}"/>
                                </StackPanel.OpacityMask>
                                <Image Source="{Binding UserImage}"  HorizontalAlignment="Left"  />
                                <Rectangle Height="50" Fill="#FFA84849"/>
                            </StackPanel>
                        </Grid>
                    </Border>-->
                    <Border DockPanel.Dock="Left" MaxWidth="350" Padding="5" Background="{DynamicResource FGChatCommingColor}" Margin="5,0,0,0" BorderBrush="#C2C2C2" CornerRadius="3" BorderThickness="0,0,0,1" HorizontalAlignment="Left" Height="auto" RenderTransformOrigin="0.42,0.524"  >
                        <Grid>
                            <StackPanel>
                                <StackPanel Visibility="{Binding Visibilty}"  Margin="0,0,0,0">
                                    <RichTextBox DockPanel.Dock="Left" Background="#fff9f9" Width="{Binding WidthWrap}" BorderThickness="0" FontSize="13.6" Margin="0,5,0,0" VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#555" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                    </RichTextBox>
                                </StackPanel>
                                <StackPanel Height="50" Margin="5,5,0,0">
                                    <Image DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Center" Height="55" Width="55" Source="{Binding ImageMedia}"/>
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-50,0,0" Width="auto" x:Name="filename" FontSize="13" FontFamily="Segoe UI" Foreground="#444" HorizontalAlignment="Left" Text="{Binding MediaName}" />
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-30,0,0" x:Name="filemega" FontSize="13" FontFamily="Segoe UI" Foreground="#444" HorizontalAlignment="Left" Text="{Binding MediaSize}" />
                                    <RichTextBox DockPanel.Dock="Left" Width="150" Margin="99,-30,0,0"  BorderBrush="White" BorderThickness="0" FontSize="13"  VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#555" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding DownloadFileUrl}"  >
                                    </RichTextBox>
                                    <TextBlock x:Name="Timechat" Margin="-20,5,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#B3B3B3" VerticalAlignment="Bottom" HorizontalAlignment="Left" Text="a" />
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>

            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="goingFILE">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Right" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <Border DockPanel.Dock="Left" MaxWidth="350" Padding="5" Background="{DynamicResource FGChatoutgoingColor}" Margin="5,0,0,0" BorderBrush="#C2C2C2" CornerRadius="3" BorderThickness="0,0,0,1" HorizontalAlignment="Left" Height="auto" RenderTransformOrigin="0.42,0.524"  >
                        <Grid>
                            <StackPanel>
                                <StackPanel Visibility="{Binding Visibilty}"  Margin="0,0,0,0">
                                    <RichTextBox DockPanel.Dock="Left" Background="{DynamicResource FGChatoutgoingColor}" Width="{Binding WidthWrap}" BorderThickness="0" FontSize="13.6" Margin="0,5,0,0" VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#555" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                    </RichTextBox>
                                </StackPanel>
                                <StackPanel Height="50" Margin="5,5,0,0">
                                    <Image DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Center" Height="55" Width="55" Source="{Binding ImageMedia}"/>
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-50,0,0" Width="auto" x:Name="filename" FontSize="13.6" FontFamily="Segoe UI" Foreground="#333" HorizontalAlignment="Left" Text="{Binding MediaName}" />
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-30,0,0" x:Name="filemega" FontSize="13.6" FontFamily="Segoe UI" Foreground="#333" HorizontalAlignment="Left" Text="{Binding MediaSize}" />
                                    <RichTextBox DockPanel.Dock="Left"  Background="{DynamicResource FGChatoutgoingColor}" Width="150" Margin="99,-30,0,0"  BorderBrush="White" BorderThickness="0" FontSize="13.6"  VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#888" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding DownloadFileUrl}"  >
                                    </RichTextBox>
                                    <TextBlock x:Name="Timechat" Margin="0,0,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#B3B3B3" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="commingVIDEO">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Left" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <!--<Border VerticalAlignment="Top"  Margin="0" DockPanel.Dock="Left" BorderBrush="#e0dede" CornerRadius="2" BorderThickness="1" HorizontalAlignment="Left" Height="37" RenderTransformOrigin="0.42,0.524"  Width="37">
                        <Grid>
                            <Border Name="mask" Background="#FF575757" CornerRadius="0"/>
                            <StackPanel>
                                <StackPanel.OpacityMask>
                                    <VisualBrush Visual="{Binding ElementName=mask}"/>
                                </StackPanel.OpacityMask>
                                <Image Source="{Binding UserImage}"  HorizontalAlignment="Left"  />
                                <Rectangle Height="50" Fill="#FFA84849"/>
                            </StackPanel>
                        </Grid>
                    </Border>-->
                    <Border DockPanel.Dock="Left" MaxWidth="350" Padding="10,7,10,8" Background="{DynamicResource FGChatCommingColor}" Margin="5,0,0,0" BorderBrush="#E5E4E4" CornerRadius="3" BorderThickness="1" HorizontalAlignment="Left" Height="auto" RenderTransformOrigin="0.42,0.524"  >
                        <Grid>
                            <StackPanel>
                                <StackPanel Width="{Binding WidthWrap}" Visibility="{Binding Visibilty}">
                                    <RichTextBox DockPanel.Dock="Left" Width="{Binding WidthWrap}"  BorderBrush="{DynamicResource FGChatCommingColor}" BorderThickness="0" FontSize="14" Margin="0,5,0,0" VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#888" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                    </RichTextBox>
                                </StackPanel>
                                <StackPanel Height="50" Margin="0,5,0,0">
                                    <Image DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Center" Height="48" Width="48" Source="{Binding ImageMedia}"/>
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-50,0,0" Width="auto" x:Name="filename" FontSize="14" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Left" Text="{Binding MediaName}" />
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-25,0,0" x:Name="filemega" FontSize="14" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Left" Text="{Binding MediaSize}" />
                                    <RichTextBox DockPanel.Dock="Left" Width="150" Margin="99,-25,0,0"  BorderBrush="White" BorderThickness="0" FontSize="14"  VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#888" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding DownloadFileUrl}"  >
                                    </RichTextBox>

                                    <TextBlock x:Name="Timechat" Margin="0,0,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>

            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="goingVIDEO">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Right" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <Border DockPanel.Dock="Left" MaxWidth="350" Padding="10,7,10,8" Background="{DynamicResource FGChatoutgoingColor}" Margin="5,0,0,0" BorderBrush="#E5E4E4" CornerRadius="3" BorderThickness="1" HorizontalAlignment="Left" Height="auto" RenderTransformOrigin="0.42,0.524"  >
                        <Grid>

                            <StackPanel DockPanel.Dock="Left" HorizontalAlignment="Left">
                                <StackPanel Width="{Binding WidthWrap}" Visibility="{Binding Visibilty}">
                                    <RichTextBox DockPanel.Dock="Left" Background="{DynamicResource FGChatoutgoingColor}" Width="{Binding WidthWrap}"  BorderBrush="#fff9f9" BorderThickness="0" FontSize="14" Margin="0,5,0,0" VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#888" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                    </RichTextBox>
                                </StackPanel>
                                <StackPanel Height="50">
                                    <Image DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Center" Height="48" Width="48" Source="{Binding ImageMedia}"/>
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-50,0,0" Width="auto" x:Name="filename" FontSize="14" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Left" Text="{Binding MediaName}" />
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-25,0,0" x:Name="filemega" FontSize="14" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Left" Text="{Binding MediaSize}" />
                                    <RichTextBox DockPanel.Dock="Left" Background="{DynamicResource FGChatoutgoingColor}" Width="150" Margin="99,-25,0,0"  BorderBrush="White" BorderThickness="0" FontSize="14"  VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#888" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding DownloadFileUrl}"  >
                                    </RichTextBox>

                                    <TextBlock x:Name="Timechat" Margin="0,0,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>

            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="commingSOUND">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Left" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <!--<Border VerticalAlignment="Top"  Margin="0" DockPanel.Dock="Left" BorderBrush="#C2C2C2" CornerRadius="3" BorderThickness="0,0,0,1" HorizontalAlignment="Left" Height="37" RenderTransformOrigin="0.42,0.524"  Width="37">
                        <Grid>
                            <Border Name="mask" Background="#FF575757" CornerRadius="0"/>
                            <StackPanel>
                                <StackPanel.OpacityMask>
                                    <VisualBrush Visual="{Binding ElementName=mask}"/>
                                </StackPanel.OpacityMask>
                                <Image Source="{Binding UserImage}"  HorizontalAlignment="Left"  />
                                <Rectangle Height="50" Fill="#FFA84849"/>
                            </StackPanel>
                        </Grid>

                    </Border>-->
                    <Border DockPanel.Dock="Left" MaxWidth="350" Padding="5" Background="{DynamicResource FGChatCommingColor}" Margin="5,0,0,0" BorderBrush="#C2C2C2" CornerRadius="3" BorderThickness="0,0,0,1" HorizontalAlignment="Left" Height="auto" RenderTransformOrigin="0.42,0.524"  >
                        <Grid>
                            <StackPanel>
                                <StackPanel Visibility="{Binding Visibilty}" Margin="0,0,0,0">
                                    <RichTextBox DockPanel.Dock="Left" Width="{Binding WidthWrap}"  BorderBrush="White" BorderThickness="0" FontSize="13.6" Margin="0,5,0,0" VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#555" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                    </RichTextBox>
                                </StackPanel>
                                <StackPanel Height="50" Margin="0,5,0,0">
                                    <Image DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Center" Height="48" Width="48" Source="{Binding ImageMedia}"/>
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-50,0,0" Width="auto" x:Name="filename" FontSize="13.6" FontFamily="Segoe UI" Foreground="#555" HorizontalAlignment="Left" Text="{Binding MediaName}" />
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-25,0,0" x:Name="filemega" FontSize="13.6" FontFamily="Segoe UI" Foreground="#555" HorizontalAlignment="Left" Text="{Binding MediaSize}" />
                                    <RichTextBox DockPanel.Dock="Left" Width="150" Margin="99,-25,0,0"  BorderBrush="White" BorderThickness="0" FontSize="13.6"  VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#888" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding DownloadFileUrl}"  >
                                    </RichTextBox>

                                    <TextBlock x:Name="Timechat" Margin="0,0,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#B3B3B3" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>

            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="goingSOUND">
            <Grid Margin="0,0,0,20" HorizontalAlignment="Right" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*" />
                    <ColumnDefinition Width="1.5*" />
                </Grid.ColumnDefinitions>
                <DockPanel  LastChildFill="True">
                    <Border DockPanel.Dock="Left" MaxWidth="350" Padding="10,7,10,8" Background="{DynamicResource FGChatoutgoingColor}" Margin="5,0,0,0" BorderBrush="#E5E4E4" CornerRadius="3" BorderThickness="1" HorizontalAlignment="Left" Height="auto" RenderTransformOrigin="0.42,0.524"  >
                        <Grid>
                            <StackPanel>
                                <StackPanel Visibility="{Binding Visibilty}" Margin="0,-10,0,0" >
                                    <RichTextBox Background="{DynamicResource FGChatoutgoingColor}" DockPanel.Dock="Left" Width="{Binding WidthWrap}"  BorderBrush="#fff9f9" BorderThickness="0" FontSize="14" Margin="-20,5,0,0" VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#888" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding Content}"  >
                                    </RichTextBox>
                                </StackPanel>
                                <StackPanel Height="50" Margin="0,5,0,0">
                                    <Image DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Center" Height="48" Width="48" Source="{Binding ImageMedia}"/>
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-50,0,0" Width="auto" x:Name="filename" FontSize="14" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Left" Text="{Binding MediaName}" />
                                    <TextBlock DockPanel.Dock="Left" Margin="63,-25,0,0" x:Name="filemega" FontSize="14" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Left" Text="{Binding MediaSize}" />
                                    <RichTextBox DockPanel.Dock="Left" Background="{DynamicResource FGChatoutgoingColor}" Width="150" Margin="99,-25,0,0"  BorderBrush="White" BorderThickness="0" FontSize="14"  VerticalAlignment="Top"  HorizontalAlignment="Left" FontFamily="Segoe UI" Foreground="#888" IsReadOnly="True" IsDocumentEnabled="True"  dts:RTBNavigationService.Content="{Binding DownloadFileUrl}"  >
                                    </RichTextBox>

                                    <TextBlock x:Name="Timechat" Margin="0,0,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Right" Text="{Binding CreatedAt}" />
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DockPanel>
            </Grid>
        </DataTemplate>
        <!-- End Region -->

        <dts:MsgDataTamplate x:Key="myDTC" commingmsg="{StaticResource commingmsg}" goingmsg="{StaticResource goingmsg}" commingimage="{StaticResource commingIMAGE}"
                             goingimage="{StaticResource goingIMAGE}" commingfile="{StaticResource commingFILE}" goingfile="{StaticResource goingFILE}" commingvideo="{StaticResource commingVIDEO}"
                             goingvideo="{StaticResource goingVIDEO}" commingsound="{StaticResource commingSOUND}" goingsound="{StaticResource goingSOUND}"/>
    </Window.Resources>


    <Grid  Margin="0">

        <!--<Grid.Effect>
            <DropShadowEffect BlurRadius="15" Color="#000" Direction="-90" RenderingBias="Performance" ShadowDepth="2" Opacity="0.2"/>
        </Grid.Effect>-->
        <Border CornerRadius="50"  BorderBrush="Transparent" BorderThickness="0" >
            <DockPanel LastChildFill="True">
                <Border x:Name="TopPanel" Height="40" Background="{DynamicResource TopHeaderColor}" CornerRadius="10,10,0,0" BorderBrush="#ededed" RenderTransformOrigin="0.5,0.542" MouseDown="HeadPanel_MouseDown" DockPanel.Dock="Top">
                    <DockPanel LastChildFill="True">
                        <StackPanel DockPanel.Dock="Left" Panel.ZIndex="1" Width="135">
                            <Image x:Name="IconApplication" HorizontalAlignment="Left" Height="17" Margin="10,11,6,6" VerticalAlignment="Center" Width="17" Source="icon.png" RenderTransformOrigin="0.42,0.524" Stretch="Fill"/>
                            <TextBlock x:Name="NameApplication" HorizontalAlignment="Left" Margin="35,-23,-15,50" TextWrapping="Wrap" Text="WoWonder Chat" VerticalAlignment="Center" Foreground="{DynamicResource TopHeaderTextColor}"/>
                        </StackPanel>

                        <Menu x:Name="SettingsMenu" Visibility="Hidden" BorderThickness="0" HorizontalAlignment="Right" Margin="50,0,0,0" VerticalAlignment="Center" BorderBrush="{DynamicResource TopHeaderColor}" Background="{DynamicResource TopHeaderColor}">
                            <MenuItem BorderThickness="0" BorderBrush="#444" Foreground="{DynamicResource TopHeaderTextColor}" Margin="0,0,0,0" Padding="3" Header="Settings"  Background="{DynamicResource TopHeaderColor}">
                                <MenuItem.Icon>
                                    <Image Source="Icons/Settings-20.png" Margin="0" Width="17" Height="17"  />
                                </MenuItem.Icon>
                                <!--<MenuItem x:Name="UpdateMenu" BorderBrush="{DynamicResource TopHeaderColor}" Foreground="{DynamicResource TopHeaderTextColor}" Header="Check for Updates" Background="{DynamicResource TopHeaderColor}" Click="UpdateMenu_Click">
                                    <MenuItem.Icon>
                                        <Image Source="Icons/Installing Updates-20.png" Width="17" Height="17"  />
                                    </MenuItem.Icon>
                                </MenuItem>-->
                                <MenuItem x:Name="PrivacyMenu" BorderBrush="{DynamicResource TopHeaderColor}" Foreground="{DynamicResource TopHeaderTextColor}" Header="Privacy Policy" Background="{DynamicResource TopHeaderColor}" Click="PrivacyMenu_Click"/>
                                <MenuItem x:Name="AboutMenu" BorderBrush="{DynamicResource TopHeaderColor}" Foreground="{DynamicResource TopHeaderTextColor}" Header="About Wowonder" Background="{DynamicResource TopHeaderColor}" Click="AboutMenu_Click">
                                    <MenuItem.Icon>
                                        <Image Source="Icons/Help-20.png" Width="17" Height="17" />
                                    </MenuItem.Icon>
                                </MenuItem>
                            </MenuItem>
                        </Menu>
                        <StackPanel VerticalAlignment="Top" Margin="191,90,-15,50" HorizontalAlignment="Left" Panel.ZIndex="0">

                        </StackPanel>


                        <Button x:Name="Exit_Button" Content="{StaticResource exit}" DockPanel.Dock="Right" Margin="0,8,6,6" VerticalAlignment="Center" Height="20" Width="20" Click="Button_Click" Background="{x:Null}" Foreground="#FFF3EAEA" RenderTransformOrigin="1.366,0.72" ToolTip="Exit">
                            <Button.ContextMenu>
                                <ContextMenu/>
                            </Button.ContextMenu>
                            <Button.BorderBrush>
                                <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                            </Button.BorderBrush>
                        </Button>
                        <Button x:Name="Maximize" Content="{StaticResource maximize}" DockPanel.Dock="Right" HorizontalAlignment="Right" Margin="0,0,0,0" VerticalAlignment="Center" Width="18" Height="18" Foreground="#FFF3EAEA" RenderTransformOrigin="1.366,0.72" ToolTip="Maximize" Background="{x:Null}" Click="Maximize_Click">
                            <Button.ContextMenu>
                                <ContextMenu/>
                            </Button.ContextMenu>
                            <Button.BorderBrush>
                                <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                            </Button.BorderBrush>
                        </Button>
                        <Button x:Name="Minimize" Content="{StaticResource minimize}" DockPanel.Dock="Right" HorizontalAlignment="Right" Margin="0,0,0,0" VerticalAlignment="Center" Width="18" Height="18" Click="minimize_Click" Foreground="#FFF3EAEA" RenderTransformOrigin="1.366,0.72" ToolTip="Minimize" Background="{x:Null}">
                            <Button.ContextMenu>
                                <ContextMenu/>
                            </Button.ContextMenu>
                            <Button.BorderBrush>
                                <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                            </Button.BorderBrush>
                        </Button>

                        <StackPanel DockPanel.Dock="Right" HorizontalAlignment="Right" Width="254">
                            <DockPanel>
                                <TextBlock DockPanel.Dock="Left" x:Name="LoginUserName" Padding="11" HorizontalAlignment="Left"   TextWrapping="Wrap" Text="Username" VerticalAlignment="Top" Foreground="{DynamicResource TopHeaderTextColor}"/>
                                <Button x:Name="Lougout" DockPanel.Dock="Left" Margin="0,9,0,0"  Content="{StaticResource Lougout}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="22" Height="22" Click="Lougout_Click" Foreground="#FFF3EAEA" RenderTransformOrigin="1.366,0.72" ToolTip="Logout" Background="{x:Null}">
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                            </DockPanel>
                        </StackPanel>

                    </DockPanel>
                </Border>

                <Border Name="ProfilePanel" CornerRadius="0,0,10,0" BorderBrush="Transparent" BorderThickness="0" Background="{DynamicResource ProfileBackroundColor}" HorizontalAlignment="Right" Margin="0,2,-350,-4" DockPanel.Dock="Right" RenderTransformOrigin="0.5,0.5" Width="303">
                    <StackPanel>
                        <Border>

                            <StackPanel >
                                <Image x:Name="CoverPicture" HorizontalAlignment="Left" Height="130" VerticalAlignment="Top" Width="350" Source="Pictures\avatar.jpg" RenderTransformOrigin="0.42,0.524" Stretch="Fill"/>
                            </StackPanel>
                        </Border>

                        <Border BorderBrush="White"  CornerRadius="3" BorderThickness="2" HorizontalAlignment="Left" Height="78" RenderTransformOrigin="0.42,0.524" VerticalAlignment="Top" Width="78" Margin="7,-85,0,0">
                            <Grid>

                                <Border Name="mask" Background="White" CornerRadius="3"/>
                                <StackPanel x:Name="BlurimageLoadingpanel" Panel.ZIndex="1" Background="White" Opacity="0.5">
                                    <Image x:Name="loadingimage2" VerticalAlignment="Center" Margin="0,15,0,0" Visibility="Visible" HorizontalAlignment="Center" Height="45" Width="45" gif:ImageBehavior.AnimatedSource="{DynamicResource ImageLoadingIcon}" Grid.ColumnSpan="3" />
                                </StackPanel>
                                <StackPanel>
                                    <StackPanel.OpacityMask>
                                        <VisualBrush Visual="{Binding ElementName=mask}"/>
                                    </StackPanel.OpacityMask>
                                    <Image x:Name="ProfilePicture" Source="Pictures\d-avatar.jpg" Stretch="Fill" HorizontalAlignment="Left"  />
                                    <Rectangle Height="50" Fill="Red"/>
                                    <Rectangle Height="50" Fill="White"/>
                                    <Rectangle Height="50" Fill="Blue"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <TextBlock x:Name="FullName" FontSize="18" Foreground="#333" Margin="90,-35,20,20" Text="Full Name">
                            <TextBlock.RenderTransform>
                                <TranslateTransform X="4" Y="3" />
                            </TextBlock.RenderTransform>
                        </TextBlock>
                        <TextBlock x:Name="FullNameText" FontSize="18" Foreground="{DynamicResource ProfileFullNameTextcolor}" Text="No Name Available" Grid.Column="0" Grid.Row="0" Margin="92,-40,20,20"></TextBlock>

                        <StackPanel Background="{DynamicResource ProfileBackroundColor}" Height="462" Margin="0,0,5,0">
                            <Image x:Name="UsernameIcon" HorizontalAlignment="Left" Height="15" VerticalAlignment="Top" Width="15" Source="{DynamicResource FullNameIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill" Margin="10,10,0,0"/>
                            <Button x:Name="UsernameText" FontSize="13" Foreground="{DynamicResource ProfileAllTextColor}" Cursor="Hand" MaxWidth="200" Background="Transparent" BorderBrush="White" BorderThickness="0" Content="Full Name" Grid.Column="0" Grid.Row="0" Margin="35,-17,60,0" Click="UsernameText_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="{x:Type Button}">
                                        <Border x:Name="bdr_main" VerticalAlignment="Top" HorizontalAlignment="Left" MaxWidth="200" Width="200" Background="Transparent" >
                                            <ContentPresenter  HorizontalAlignment="Left" ContentSource="Content" Margin="0,0,-94,0" Width="155" />
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bdr_main" Property="Background" Value="Transparent"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="bdr_main" Property="Background" Value="Transparent"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                            <Image x:Name="GenderIcon" HorizontalAlignment="Left" Height="15" VerticalAlignment="Top" Width="15" Source="{DynamicResource GenderIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill" Margin="10,11,0,0"/>
                            <TextBlock x:Name="GenderText" FontSize="13" Foreground="{DynamicResource ProfileAllTextColor}" Text="Gender" Grid.Column="0" Grid.Row="0" Margin="35,-17,0,0"/>
                            <Image x:Name="CalendarIcon" HorizontalAlignment="Left" Height="15" VerticalAlignment="Top" Width="15" Source="{DynamicResource CalendarIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill" Margin="10,11,0,0"/>
                            <TextBlock x:Name="CalenderText" FontSize="13" Foreground="{DynamicResource ProfileAllTextColor}" Text="Unavailable" Grid.Column="0" Grid.Row="0" Margin="35,-16,0,0"/>
                            <Image x:Name="EmailIcon" HorizontalAlignment="Left" Height="15" VerticalAlignment="Top" Width="15" Source="{DynamicResource EmailIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill" Margin="10,11,0,0"/>
                            <TextBlock x:Name="EmailText" FontSize="13" Foreground="{DynamicResource ProfileAllTextColor}" Text="Private" Grid.Column="0" Grid.Row="0" Margin="35,-17,0,0"/>
                            <Image x:Name="PlaceIcon" HorizontalAlignment="Left" Height="15" VerticalAlignment="Top" Width="15" Source="{DynamicResource PlaceIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill" Margin="10,11,0,0"/>
                            <TextBlock x:Name="PlaceeText" FontSize="13" Foreground="{DynamicResource ProfileAllTextColor}" Text="Unavailable" Grid.Column="0" Grid.Row="0" Margin="35,-17,0,0"/>
                            <Image x:Name="LastIcon" HorizontalAlignment="Left" Height="16" VerticalAlignment="Top" Width="15" Source="{DynamicResource LastIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill" Margin="10,11,0,0"/>
                            <TextBlock x:Name="LastseenText" FontSize="13" Foreground="{DynamicResource ProfileAllTextColor}" Text="Unavailable" Grid.Column="0" Grid.Row="0" Margin="35,-18,0,0"/>

                            <TextBlock x:Name="FriendText" FontSize="13" Foreground="{DynamicResource ProfileAllTextColor}" Text="Unavailable" Grid.Column="0" Grid.Row="0" Margin="35,11,0,0"/>
                            <Image x:Name="FriendIcon" Visibility="Visible" HorizontalAlignment="Left" Height="16" VerticalAlignment="Top" Width="15" Source="{DynamicResource FriendIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill" Margin="10,-17,0,0"/>
                            <Grid>
                                <Image x:Name="loadingfrendsellipse" VerticalAlignment="Bottom" Margin="10,-17,0,0" Visibility="Hidden" HorizontalAlignment="Left" Height="15" Width="15" gif:ImageBehavior.AnimatedSource="Resources/7b.gif" Grid.ColumnSpan="3" />
                            </Grid>
                            <Grid Height="60" Margin="26,20,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="0"/>
                                </Grid.RowDefinitions>

                                <ListBox Grid.Row="0" Height="60" Background="{x:Null}" x:Name="FrendsList" BorderBrush="{x:Null}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" SelectionChanged="FrendsList_SelectionChanged">
                                    <ListBox.ItemContainerStyle>
                                        <Style TargetType="ListBoxItem">
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="Red" />
                                                    <Setter Property="BorderBrush" Value="Red" />
                                                    <Setter Property="BorderThickness" Value="0" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ListBox.ItemContainerStyle>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="White"  CornerRadius="2,2,2,2" BorderThickness="2" Height="38" Margin="-3,0,-3,0" Padding="0" RenderTransformOrigin="0.42,0.524" Width="38">
                                                <Grid>
                                                    <Border Name="bbbmask" Background="White" CornerRadius="2,2,2,2"/>
                                                    <StackPanel>
                                                        <StackPanel.OpacityMask>
                                                            <VisualBrush Visual="{Binding ElementName=bbbmask}"/>
                                                        </StackPanel.OpacityMask>
                                                        <Image Margin="-3,0,-3,0" Height="38" Width="38" Source="{Binding avatar}" VerticalAlignment="Top"/>
                                                    </StackPanel>
                                                    <ToolTipService.ToolTip>
                                                        <StackPanel>
                                                            <TextBlock Text="{Binding name}" />
                                                        </StackPanel>
                                                    </ToolTipService.ToolTip>
                                                </Grid>
                                            </Border>

                                        </DataTemplate>
                                    </ListBox.ItemTemplate>

                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel/>
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                </ListBox>
                                <ListBox Visibility="Hidden" Name="FrendListNotavailble" Margin="2,-15,0,0" MinWidth="300"  Padding="0,0,0,0" Height="60" Background="{x:Null}" DockPanel.Dock="Bottom" BorderBrush="{x:Null}" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="280" />
                                                    <ColumnDefinition Width="150" />
                                                </Grid.ColumnDefinitions>
                                                <!--TimePost-->
                                                <DockPanel  LastChildFill="True">
                                                    <TextBlock DockPanel.Dock="Left" Margin="10,0,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="#777" HorizontalAlignment="Left" Text="{Binding name}" />
                                                </DockPanel>
                                                <!--LastPost-->
                                                <TextBlock Foreground="#555" FontSize="12" Margin="10,15,0,0" FontFamily="Segoe UI" Text="{Binding username}" />
                                                <!--Line Photo-->
                                                <Border BorderBrush="{DynamicResource FGColor}" CornerRadius="0" BorderThickness="0" HorizontalAlignment="Left" Height="40" RenderTransformOrigin="0.42,0.524"  Width="4">
                                                    <Grid>
                                                        <Border Name="mask" Background="{DynamicResource FGColor}" CornerRadius="0"/>
                                                        <StackPanel>
                                                            <StackPanel.OpacityMask>
                                                                <VisualBrush Visual="{Binding ElementName=mask}"/>
                                                            </StackPanel.OpacityMask>
                                                            <Image Source="{Binding profile_picture}"  HorizontalAlignment="Left"  />
                                                            <Rectangle Height="50" Fill="{DynamicResource FGColor}"/>
                                                            <Rectangle Height="50" Fill="{DynamicResource FGColor}"/>
                                                            <Rectangle Height="50" Fill="{DynamicResource FGColor}"/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>

                                            </Grid>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>

                            </Grid>
                            <Image x:Name="LastPostIcon" HorizontalAlignment="Left" Height="16" VerticalAlignment="Top" Width="15" Source="{DynamicResource LastPostIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill" Margin="10,7,0,0"/>
                            <TextBlock x:Name="PostText" FontSize="13" Foreground="{DynamicResource ProfileAllTextColor}" Text="Latest Post" Grid.Column="0" Grid.Row="0" Margin="0,-17,-13,0" HorizontalAlignment="Right" Width="275"/>
                            <Grid>
                                <Image x:Name="loadingpostsellipse" VerticalAlignment="Bottom" Margin="10,-17,0,0" Visibility="Hidden" HorizontalAlignment="Left" Height="15" Width="15" gif:ImageBehavior.AnimatedSource="Resources/7b.gif" Grid.ColumnSpan="3" />

                            </Grid>
                            <ListBox Name="PostList" Margin="27,5,0,0" MinWidth="250"  Padding="0,0,0,0" Height="166" Background="Transparent" DockPanel.Dock="Bottom" BorderBrush="{x:Null}" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectionChanged="PostList_SelectionChanged">
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="Red" />
                                                <Setter Property="BorderBrush" Value="Red" />
                                                <Setter Property="BorderThickness" Value="0" />
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </ListBox.ItemContainerStyle>

                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="250" />
                                                <ColumnDefinition Width="100" />
                                            </Grid.ColumnDefinitions>
                                            <!--TimePost-->
                                            <DockPanel  LastChildFill="True">
                                                <TextBlock DockPanel.Dock="Left" Margin="10,0,0,0" FontSize="11" FontFamily="Segoe UI" Foreground="{DynamicResource ProfileLatestTimePost}" HorizontalAlignment="Left" Text="{Binding time_text}" />
                                            </DockPanel>
                                            <!--LastPost-->
                                            <TextBlock Foreground="{DynamicResource ProfileAllTextColor}" FontSize="12" Margin="10,15,0,0" FontFamily="Segoe UI" Text="{Binding Orginaltext}" />
                                            <!--Line Photo-->
                                            <Border BorderBrush="{DynamicResource FGColor}" CornerRadius="0" BorderThickness="0" HorizontalAlignment="Left" Height="40" RenderTransformOrigin="0.42,0.524"  Width="4">
                                                <Grid>
                                                    <Border Name="mask" Background="{DynamicResource FGColor}" CornerRadius="0"/>
                                                    <StackPanel>
                                                        <StackPanel.OpacityMask>
                                                            <VisualBrush Visual="{Binding ElementName=mask}"/>
                                                        </StackPanel.OpacityMask>
                                                        <Image Source="{Binding profile_picture}"  HorizontalAlignment="Left"  />
                                                        <Rectangle Height="50" Fill="{DynamicResource FGColor}"/>
                                                        <Rectangle Height="50" Fill="{DynamicResource FGColor}"/>
                                                        <Rectangle Height="50" Fill="{DynamicResource FGColor}"/>
                                                    </StackPanel>
                                                </Grid>
                                            </Border>

                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                        </StackPanel>

                    </StackPanel>
                </Border>
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="0"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MinWidth="260" Width="*"/>
                        <ColumnDefinition Width="3.6*"/>
                    </Grid.ColumnDefinitions>

                    <Border  x:Name="ChatUsersPanel" Background="White" BorderBrush="#f2f2f2" BorderThickness="0,0,1,0" Width="auto" DockPanel.Dock="Left">

                        <DockPanel LastChildFill="True" MaxWidth="260">
                            <StackPanel Background="{DynamicResource ChatContactsSearchPanel}" Width="auto" Height="41" DockPanel.Dock="Top">

                                <TextBox x:Name="UserSearchTextBox" Background="{DynamicResource ChatContactsSearchPanel}" BorderThickness="0" BorderBrush="#f1f1f1" Text="Search" FontSize="13" Height="37" Width="Auto" Margin="30,2,50,0" Padding="8" GotFocus="UserSearchTextBox_GotFocus" KeyUp="UserSearchTextBox_KeyUp" KeyDown="UserSearchTextBox_KeyDown_1" TextChanged="UserSearchTextBox_TextChanged" PreviewMouseMove="UserSearchTextBox_PreviewMouseMove" PreviewKeyDown="UserSearchTextBox_PreviewKeyDown" />
                                <Image x:Name="IconSearch" HorizontalAlignment="Left" Height="17" Margin="11,-29,6,10" VerticalAlignment="Top" Width="17" Source="{DynamicResource SearchIcon}" RenderTransformOrigin="0.42,0.524" Stretch="Fill"/>
                                <Grid>
                                    <Image x:Name="loadingSearch" VerticalAlignment="Center" Margin="14,-39,0,0" Visibility="Hidden" HorizontalAlignment="Left" Height="15" Width="15" gif:ImageBehavior.AnimatedSource="Resources/7b.gif" Grid.ColumnSpan="3" />

                                </Grid>
                                <ComboBox Style="{DynamicResource ComboBoxFlatStyle}" SelectedIndex="0" Text="OrderBY" Margin="210,-36,6,10" Height="31" x:Name="OnOffAllChatStatus" Background="{DynamicResource ChatContactsSearchPanel}" SelectionChanged="OnOffAllChatStatus_SelectionChanged" BorderBrush="{x:Null}" BorderThickness="0"  >
                                    <ComboBoxItem BorderBrush="{x:Null}" Padding="2">
                                        <StackPanel Orientation="Horizontal">
                                            <Image Height="12" Width="12" Source="{DynamicResource AllIconComboBox}" />
                                            <TextBlock Padding="5,0,0,0" FontSize="12" Foreground="#1A61A7">All</TextBlock>
                                        </StackPanel>
                                    </ComboBoxItem>
                                    <ComboBoxItem BorderBrush="{x:Null}" Padding="2">
                                        <StackPanel  Orientation="Horizontal">
                                            <Image Height="10" Width="10" Source="{DynamicResource OnlineIconComboBox}" />
                                            <TextBlock Padding="5,0,0,0" FontSize="12" Foreground="#469F0F">Online</TextBlock>
                                        </StackPanel>
                                    </ComboBoxItem>
                                    <ComboBoxItem  Padding="2" BorderBrush="{x:Null}">
                                        <StackPanel Orientation="Horizontal">
                                            <Image Height="10" Width="10" Source="{DynamicResource OfflineIconComboBox}" />
                                            <TextBlock Padding="5,0,0,0" FontSize="12" Foreground="#ED1F1F">Offline</TextBlock>
                                        </StackPanel>
                                    </ComboBoxItem>
                                </ComboBox>
                            </StackPanel>
                            <Grid  Background="White" DockPanel.Dock="Bottom" Height="auto"  Width="auto">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="1"/>
                                </Grid.RowDefinitions>
                                <StackPanel Panel.ZIndex="1" Margin="0,0,0,0" x:Name="OnlineOflinePanel"  Visibility="Visible" Background="{DynamicResource ChatContactsLoadingPanelColor}" Opacity="0.8" Grid.RowSpan="2" >
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="83*"/>
                                            <ColumnDefinition Width="24*"/>
                                            <ColumnDefinition Width="143*"/>
                                        </Grid.ColumnDefinitions>
                                        <Image x:Name="loading" VerticalAlignment="Center" Margin="35,280,59,0" Visibility="Visible" HorizontalAlignment="Center" Height="50" Width="167" gif:ImageBehavior.AnimatedSource="{DynamicResource ChatContactsLoadingImageGif}" Grid.ColumnSpan="3" />
                                    </Grid>

                                </StackPanel>

                                <ListBox Name="lbTodoList" Height="auto" ScrollViewer.CanContentScroll="False" Style="{DynamicResource ListBoxStyle2}" HorizontalAlignment="Left"  DockPanel.Dock="Bottom" BorderBrush="{DynamicResource ChatContactsBackroundColor}" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectionChanged="lbTodoList_SelectionChanged" MinWidth="260" Width="auto" Background="{DynamicResource ChatContactsBackroundColor}">

                                    <ListBox.ItemContainerStyle>
                                        <Style TargetType="ListBoxItem">
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{DynamicResource ChatContactsBackroundColor}" />
                                                    <Setter Property="BorderBrush" Value="Red" />
                                                    <Setter Property="BorderThickness" Value="0" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ListBox.ItemContainerStyle>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>

                                            <Border x:Name="Border" Padding="5" Margin="0" Background="{Binding SeenMessageOrNo}">

                                                <Grid Margin="0" >

                                                    <!--Username-->
                                                    <DockPanel  LastChildFill="True" Margin="55,-1,0,0">

                                                        <TextBlock DockPanel.Dock="Left" x:Name="ChatUsername" FontWeight="SemiBold" FontFamily="Segoe UI" FontSize="13.6" TextOptions.TextFormattingMode="Display" Width="auto" HorizontalAlignment="Left" MaxWidth="125" Foreground="{DynamicResource ChatContactsUsernameColor}" Text="{Binding username}" />
                                                        <Image DockPanel.Dock="Right"  Margin="5,-23,0,0"  Source="{Binding verified}" Height="12" Width="12" HorizontalAlignment="Left"  />

                                                    </DockPanel>
                                                    <!--lastmessage-->
                                                    <TextBlock FontSize="12" Margin="55,20,0,0" FontFamily="Segoe UI" Foreground="{DynamicResource ChatContactsLastMsgColor}" Text="{Binding text}" />
                                                    <!--ProfilePicture-->
                                                    <Border BorderBrush="{DynamicResource ChatContactsImageBorderColor}" CornerRadius="4" BorderThickness="2" HorizontalAlignment="Left" Height="45" RenderTransformOrigin="0.42,0.524"  Width="45">
                                                        <Grid>
                                                            <Border Name="mask" Background="{DynamicResource ChatContactsImageBorderColor}" CornerRadius="0"/>
                                                            <StackPanel>
                                                                <StackPanel.OpacityMask>
                                                                    <VisualBrush Visual="{Binding ElementName=mask}"/>
                                                                </StackPanel.OpacityMask>
                                                                <Image Source="{Binding profile_picture}"  HorizontalAlignment="Left"  />
                                                                <Rectangle Height="50" Fill="Red"/>
                                                                <Rectangle Height="50" Fill="White"/>
                                                                <Rectangle Height="50" Fill="Blue"/>
                                                            </StackPanel>
                                                        </Grid>
                                                    </Border>
                                                    <!--OnlineIcon-->
                                                    <Border BorderBrush="{DynamicResource ChatContactsBackroundColor}" CornerRadius="6" Margin="33,-30,0,0" BorderThickness="0" HorizontalAlignment="Left" Height="8" RenderTransformOrigin="0.42,0.524"  Width="8">
                                                        <Grid>
                                                            <StackPanel>
                                                                <Image  Source="{Binding lastseen}" HorizontalAlignment="Left"  />
                                                            </StackPanel>
                                                        </Grid>

                                                    </Border>
                                                    <TextBlock FontSize="11" FontFamily="Segoe UI" Foreground="{DynamicResource ChatContactsTimeMsgColor}" Text="{Binding LastMessage_date_time}" Margin="192,2,0,0" />
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Grid>
                        </DockPanel>
                    </Border>
                </Grid>

                <DockPanel Background="#f2f2f2">
                    <Border x:Name="ChatInfoPanel" MaxHeight="42" Height="42" Background="{DynamicResource ChatViewHeaderColor}" VerticalAlignment="Top" BorderThickness="0" BorderBrush="#ededed" Width="auto" DockPanel.Dock="Top">
                        <!--<Border.Effect>
                                <DropShadowEffect BlurRadius="10" Color="#444" Direction="-90" RenderingBias="Quality" Opacity="0.1" />
                            </Border.Effect>-->
                        <StackPanel>
                            <StackPanel Width="310" MaxWidth="510" HorizontalAlignment="Left" Height="40" >
                                <TextBlock x:Name="ChatTitleChange" Foreground="{DynamicResource ChatViewHeaderTextColor}" FontSize="14.6" Padding="8,2,0,0" MaxWidth="300" FontWeight="SemiBold"  FontFamily="Segoe UI" HorizontalAlignment="Left" Text="" Width="265" Margin="0,0,0,0"/>
                                <TextBlock x:Name="ChatSeen" Text="" Foreground="{DynamicResource ChatViewHeaderTextColor}" FontSize="11" Padding="8,1,0,0" MaxWidth="300"  FontFamily="Segoe UI" HorizontalAlignment="Left" Width="265" Margin="0,0,0,0"/>
                            </StackPanel>
                            <Button x:Name="VideochatButton" Visibility="Hidden" BorderBrush="{x:Null}" Content="{StaticResource VideoCallIcon}" HorizontalAlignment="Right" Margin="0,-33,40,6" VerticalAlignment="Top" Width="26" Height="26" RenderTransformOrigin="1.366,0.72" ToolTip="Video Call" Background="{x:Null}"/>
                            <Button x:Name="Profile" Content="{StaticResource Profile}" HorizontalAlignment="Right" Margin="0,-33,5,9" VerticalAlignment="Top" Width="25" Height="25" Click="Profile_Click" Foreground="#FFF3EAEA" RenderTransformOrigin="1.366,0.72" ToolTip="Show User Profile" Background="{x:Null}">
                                <Button.ContextMenu>
                                    <ContextMenu/>
                                </Button.ContextMenu>
                                <Button.BorderBrush>
                                    <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                </Button.BorderBrush>
                            </Button>
                            <Button x:Name="Profileclose" Content="{StaticResource ProfileIconClose}" Visibility="Hidden" HorizontalAlignment="Right" Margin="0,-33,5,9" VerticalAlignment="Top" Width="25" Height="25" Click="Profileclose_Click" Foreground="#FFF3EAEA" RenderTransformOrigin="1.366,0.72" ToolTip="Hide User Profile" Background="{x:Null}">
                                <Button.ContextMenu>
                                    <ContextMenu/>
                                </Button.ContextMenu>
                                <Button.BorderBrush>
                                    <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                </Button.BorderBrush>
                            </Button>
                        </StackPanel>
                    </Border>

                    <Grid  DockPanel.Dock="Top" >
                        <Grid.RowDefinitions>
                            <RowDefinition Height="10*"  />
                            <RowDefinition Height="1.3*"/>
                        </Grid.RowDefinitions>
                        <Button Panel.ZIndex="3" x:Name="LoadmoreMessages" Content="Load More Messages" HorizontalAlignment="Center" VerticalAlignment="Top" Width="148" Background="Red" Foreground="#555" BorderBrush="#FF575757" Height="26" FontSize="12" Click="LoadmoreMessages_Click" >
                            <Button.ContentTemplate>
                                <DataTemplate>
                                    <StackPanel Height="26" Width="148" Margin="-5,-5,0,0">
                                        <Image HorizontalAlignment="Left" Margin="7,6,0,0" Source="Icons/LoadMore-12.png" Height="12" Width="12" />
                                        <TextBlock x:Name="Loadmoretext" FontSize="12"  HorizontalAlignment="Right" Margin="0,-15,10,0" Height="26" VerticalAlignment="Top" Text="{TemplateBinding Content}"></TextBlock>
                                    </StackPanel>
                                </DataTemplate>
                            </Button.ContentTemplate>
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border x:Name="bdr_main" CornerRadius="2" Background="Transparent" Padding="6" Cursor="Hand">
                                        <ContentPresenter  HorizontalAlignment="Center" ContentSource="Content" />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bdr_main" Property="Background" Value="#f2f2f2"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="bdr_main" Property="Background" Value="#f2f2f2"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        <StackPanel x:Name="imogiPanel" Panel.ZIndex="1" Margin="0,0,30,7"  Background="White" Height="140" Visibility="Hidden" Width=" 210" VerticalAlignment="Bottom" HorizontalAlignment="Right" MouseLeave="imogiPanel_MouseLeave" MouseMove="imogiPanel_MouseMove" MouseEnter="imogiPanel_MouseEnter">
                            <DockPanel LastChildFill="True" Margin="5">
                                <Button x:Name="NormalSmile" Content="{StaticResource NormalSmile}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="NormalSmile_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="LaughingEmoji" Content="{StaticResource Laughing Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="LaughingEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="HappyFaceEmoji" Content="{StaticResource Happy Face Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="HappyFaceEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="CrazyEmoji" Content="{StaticResource Crazy Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="CrazyEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="ChesekyEmoji" Content="{StaticResource Cheeky Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="ChesekyEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="CoolEmoji" Content="{StaticResource Cool Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="CoolEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="CringeEmoji" Content="{StaticResource Cringe Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="CringeEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="CossolEmoji" Content="{StaticResource Flirting Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="CossolEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>

                            </DockPanel>
                            <DockPanel LastChildFill="True" Margin="5">
                                <Button x:Name="AngelEmoji" Content="{StaticResource Angel Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="AngelEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="CryingEmoji" Content="{StaticResource Crying Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="CryingEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="SadfaceEmoji" Content="{StaticResource Sadface Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="SadfaceEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="KissingEmoji" Content="{StaticResource Kissing Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="KissingEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="HeartEmoji" Content="{StaticResource Heart Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="HeartEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="BreakingHeartEmoji" Content="{StaticResource Breaking Heart Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="BreakingHeartEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="HeartEyesEmoji" Content="{StaticResource Heart Eyes Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="HeartEyesEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="StarEmoji" Content="{StaticResource Star Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="StarEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                            </DockPanel>
                            <DockPanel LastChildFill="True" Margin="5">
                                <Button x:Name="SurprisedEmoji" Content="{StaticResource Surprised Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="SurprisedEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="ScreamEmoji" Content="{StaticResource Scream Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="ScreamEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="PainedFaceEmoji" Content="{StaticResource PainedFaceEmoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="PainedFaceEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="DissatisfiedEmoji" Content="{StaticResource Dissatisfied Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="DissatisfiedEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="AngryEmoji" Content="{StaticResource Angry Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="AngryEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="AngryFace" Content="{StaticResource Angry Face}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="AngryFace_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="FaceWithStraightMouthEmoji" Content="{StaticResource Face With Straight Mouth Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="FaceWithStraightMouthEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="PuzzledEmoji" Content="{StaticResource Puzzled Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="PuzzledEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                            </DockPanel>
                            <DockPanel LastChildFill="True" Margin="5">
                                <Button x:Name="StraightFacedEmoji" Content="{StaticResource Straight Faced Emoji}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="StraightFacedEmoji_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="HeavyExclamation" Content="{StaticResource Heavy Exclamation}" HorizontalAlignment="Left"  VerticalAlignment="Top" Width="25" Height="25" RenderTransformOrigin="1.366,0.72" Background="{x:Null}" Click="HeavyExclamation_Click"  >
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                            </DockPanel>
                        </StackPanel>
                        <Border x:Name="NoMessagePanel" CornerRadius="2" Background="#999" Panel.ZIndex="1" Visibility="Visible"  MaxHeight="30" Width="auto" HorizontalAlignment="Center" >
                            <TextBlock Text="{Binding Source={StaticResource NoMessageBlock}, Path=Text}" TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType" FontSize="14.6" Margin="17,0,17,5" VerticalAlignment="Bottom" Foreground="White" HorizontalAlignment="Center"></TextBlock>
                        </Border>
                        <ListBox Grid.Row="0"  Padding="10,20,10,10" ScrollViewer.CanContentScroll="False"  Visibility="Visible"  IsSynchronizedWithCurrentItem="True"  ScrollViewer.ScrollChanged="cbdg1_ScrollChanged" Style="{DynamicResource ListBoxStyle1}" ItemTemplateSelector="{StaticResource myDTC}"  Name="ChatMessgaeslist" Margin="0,0,0,0"  Background="Transparent"  BorderBrush="{x:Null}"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" >
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="IsSelected" Value="{Binding Content.IsSelected, Mode=TwoWay, RelativeSource={RelativeSource Self}}"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ListBoxItem">
                                                <ContentPresenter/>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ListBox.ItemContainerStyle>
                        </ListBox>
                       
                        <Border Grid.Row="1" Panel.ZIndex="1" x:Name="SendMessagepanel"  Background="#fff" Margin="0,0,0,0" VerticalAlignment="Stretch"    >
                            <StackPanel VerticalAlignment="Top" Margin="0,-4,0,0" >

                                <RichTextBox x:Name="MessageBoxText" ScrollViewer.HorizontalScrollBarVisibility="Disabled"  AcceptsReturn="True"  BorderThickness="0" MaxHeight="90"  Height="auto"  MinHeight="60"  BorderBrush="White"  Padding="5,15,100,0"  Width="auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0,4,0,0" KeyDown="MessageBoxText_OnKeyDownHandler" GotFocus="MessageBoxText_GotFocus" TextChanged="MessageBoxText_TextChanged" PreviewKeyDown="MessageBoxText_PreviewKeyDown">
                                    <RichTextBox.Resources>
                                        <Style TargetType="{x:Type Paragraph}">
                                            <Setter Property="Margin" Value="0" />
                                        </Style>
                                    </RichTextBox.Resources>
                                    <FlowDocument FontSize="14" FontFamily="Segoe UI"  PageHeight="90" >
                                        <Paragraph Foreground="Gray">Write your Message</Paragraph>
                                    </FlowDocument>
                                </RichTextBox>
                                   
                                <Button x:Name="AttachButton" Content="{StaticResource AttachIcon}" HorizontalAlignment="Right" Margin="35,-44,73,6" VerticalAlignment="Center" Width="24" Height="24" RenderTransformOrigin="1.366,0.72" ToolTip="Attach File" Background="{x:Null}" Click="AttachButton_Click">
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="SmileButton" Content="{StaticResource SmileIcon}" HorizontalAlignment="Right" Margin="35,-44,45,6" VerticalAlignment="Center" Width="21" Height="21" RenderTransformOrigin="1.366,0.72" ToolTip="Emoji Icons" Background="{x:Null}" Click="SmileButton_Click" MouseDown="SmileButton_MouseDown">
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Button x:Name="SendButton" Content="{StaticResource SendIcon}" HorizontalAlignment="Right" Margin="35,-44,15,6" VerticalAlignment="Center" Width="21" Height="21" RenderTransformOrigin="1.366,0.72" ToolTip="Send" Background="{x:Null}" Click="SendButton_Click">
                                    <Button.BorderBrush>
                                        <SolidColorBrush Color="#FF707070" Opacity="0.01"/>
                                    </Button.BorderBrush>
                                </Button>
                                <Image x:Name="uplouding" VerticalAlignment="Bottom" Margin="0,-52,10,0" Visibility="Hidden" HorizontalAlignment="Right" Height="12" Width="86" gif:ImageBehavior.AnimatedSource="Resources/30 (1).gif" Grid.ColumnSpan="3" />
                            </StackPanel>
                        </Border>
                    </Grid>

                </DockPanel>







            </DockPanel>

        </Border>
    </Grid>
</Window>
